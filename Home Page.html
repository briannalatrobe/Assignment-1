<!DOCTYPE HTML>
<html>
    <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- This is used for the hamburger menu, specifically browser scaling -->
    <meta name="color-scheme" content="light dark"> <!-- This is used for the dark mode feature -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- This is used for the hamburger menu icon -->
    <!--This style sheet is used for the dark mode feature-->
    <style>
        body {
            padding: 20px;
            background-color: white;
            color: black;
            font-size: 30px;
        }

        .dark-mode {
            background-color: black;
            color: white;
        }
    </style>

    <!--This style sheet is used for the vertical lines that separate the header and footer-->
    <style> 
        hr.thickline {
            height: 5px;
            border: none;
            background-color: black;
            margin-top: 5px;
            margin-bottom: 5px;
        }

        body.dark-mode hr.thickline {
            background-color: white; 
        }

        hr.vertical-line {
        border-left: 1px solid;
        height: 100px; 
        }
    </style>

    <!--This style sheet is for the appearance of the hamburger menu, both uncollapsed and collapsed.-->
    <style> 
        .topnav {
            overflow: hidden;
        }
                
        .topnav a {
            float: left;
            display: block;
            text-align: center;
            color: black;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
        }
                
        .topnav a:hover {
            border: 2px solid;
        }
                
        .topnav a.active {
            background-color: black;
            color: white;
        }
                
        .topnav .icon {
            display: none;
        }
                
        @media screen and (max-width: 900px) {
            .topnav a:not(:first-child) {display: none;}
            .topnav a.icon {
                float: right;
                display: block;
                }
        }
                
        @media screen and (max-width: 900px) {
            .topnav.responsive {position: relative;}
            .topnav.responsive .icon {
                position: absolute;
                right: 0;
                top: 0;
                }
            .topnav.responsive a {
                float: none;
                display: block;
                text-align: left;
                }
        }
    </style>

    <!--This style sheet is for the slider which controls the dark mode setting-->
    <style> 
        .switch {
            position: relative;
            display: inline-block;
            width: 30px;
            height: 17px;
        }
        
        .switch input { 
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: black;
            -webkit-transition: .4s;
            transition: .4s;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 13px;
            width: 13px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

        input:checked + .slider {
            background-color: grey;
        }

        input:focus + .slider {
            box-shadow: 0 0 1px black;
        }

        input:checked + .slider:before {
            -webkit-transform: translateX(13px);
            -ms-transform: translateX(13px);
            transform: translateX(13px);
        }

        .slider.round {
            border-radius: 17px;
        }

        .slider.round:before {
            border-radius: 50%;
        }
    </style>

    <!--This style sheet is for the reset button--> 
    <style>
        .MyButton {
            color: black;
            background-color: white;
            padding: 15px 15px;
            border: 3px solid black;
            border-radius: 30%;
        }

        body.dark-mode .MyButton {
            background-color: black;
            border: 3px solid white;
            color: white;
        }
    </style>

    <!--This style sheet is for the tab section, including the tab buttons, output boxes, & content inside the boxes --> 
    <style>
        .tabs-layout {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
    
        .tab-headers {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
    
        .tab-button {
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            border: 1px solid black; 
            padding: 5px; 
            background-color: white; 
            cursor: pointer; 
            width: 120px; 
            color: black
        }
    
        .tab-button.active {
            background: #ddd;
            font-weight: bold;
        }
    
        .tab-content-box {
            border: 1px solid black;
            padding: 15px;
            width: 250px;
            min-height: 150px;
            background: #f9f9f9;
        }
    
        body.dark-mode .tab-button {
            border: 1px solid white;
            background: #222;
            color: white;
        }
    
        body.dark-mode .tab-button.active {
            background: #444;
        }
    
        body.dark-mode .tab-content-box {
            border: 1px solid white;
            background: #222;
            color: white;
        }
    </style>

    <head> <!--This includes student number, title, dark mode function, and hamburger menu-->
        <p style="text-align: right; font-size: 15px;">STUDENT NUMBER: 21984687</p> <!--student number is located in top right hand corner-->
        <p style="text-align: center;">Assignment 1 Submission</p> <!--Title is centered-->

        <!--Dark mode checkbox function-->
        <p style="text-align: right; font-size: 18px">Dark Mode 
            <label class="switch">
            <input type="checkbox" onclick="DarkMode()"> <!--When the button is clicked, the DarkMode function applies itself-->
            <span class="slider round"></span> 
        </label></p>
        <!--This script makes the checkbox toggle dark mode on/off-->
        <script> 
            function DarkMode() {
               var element = document.body;
               element.classList.toggle("dark-mode");
            }
        </script>
        
        <div>
            <hr class="thickline"> <!--Separator Line-->
                <div class="topnav" id="MainMenu"> <!--This is the list of menu items in the Hamburger menu-->
                  <a href="Home Page.html">Tabs</a>
                  <a href="Escape Room.html">Escape Room</a>
                  <a href="Coding Races.html">Coding Races</a>
                  <a href="Court Room.html">Court Room</a>
                  <a href="About Page.html">About</a>
                  <a href="javascript:void(0);" class="icon" onclick="Collapse()"> <!--This is saying that when the page goes below a certain number of pixels in size, to collapse the menu -->
                    <i class="fa fa-bars"></i>
                  </a>
                </div>
                
                <!-- This is the script that allows for the hamburger menu to change depending on the size of the current browser -->
                <script>
                function Collapse() {
                  var menu = document.getElementById("MainMenu"); //defines the menu element
                  if (menu.className === "topnav") { //checks the current state of the menu. "topnav" means that the webpage is in desktop layout
                    menu.className += " responsive"; //toggles the vertical list. Only does this if the page becomes a mobile layout
                  } else {
                    menu.className = "topnav"; //if it doesn't become a mobile layout it stays in desktop layout
                  }
                }
                </script>
            <hr class="thickline"> <!--Separator Line-->
        </div>
    </head> <!--End of Header-->
    <body> <!--Beginning of Body-->
        <div> <!--This div is for the body heading "Tabs"-->
        <p style="text-align: left; margin-left: 100px;">Tabs</p>
        
        </div>
        <div> <!--This div is for the sub-heading & for the [+] and [-] buttons-->
            <section class="tabs-section">
                <div>
                  Tabs Headers: 
                  <button onclick="AddTab()">[+]</button>
                  <button onclick="RemoveTab()">[-]</button>
                </div>
                <div id="tabContents">
                    <div class="tab-headers" id="tabHeaders"></div>
                
                    <div>
                        <h3>Tabs Content</h3>
                        <div id="tabContentBox" class="tab-content-box" contenteditable="true">
                        Select a tab to see its content.
                        </div>
                    </div>
                    <div>
                        <h3>HTML Output</h3>
                        <pre id="codeOutput" class="tab-content-box"></pre>
                        <button class="MyButton" onclick="ResetTabs()">Reset</button>
                    </div>
                    
                </div>
            </section>
            <script>
                let tabCounter = 1;
                let currentTabId = null;
                let tabData = {};
                let deletedTabs = [];
                const MAX_TABS = 15;
                
                // Load saved tabs from localStorage
                window.onload = function() {
                    const savedTabs = JSON.parse(localStorage.getItem("tabsData"));
                    if(savedTabs && savedTabs.tabData && Object.keys(savedTabs.tabData).length > 0) {
                        tabCounter = savedTabs.tabCounter || Object.keys(savedTabs.tabData).length;
                        tabData = savedTabs.tabData;
                        const headers = document.getElementById("tabHeaders");
                        for(const id in tabData) {
                            const btn = createTabButton(id, tabData[id].label);
                            headers.appendChild(btn);
                        }
                        showTab(Object.keys(tabData)[0]);
                    } else {
                        // No saved tabs, create first default tab
                        AddTab();
                    }
                }
                
                // Create a tab button
                function createTabButton(id, label) {
                    const btn = document.createElement('button');
                    btn.className = 'tab-button';
                    btn.id = `btn-${id}`;
                    btn.textContent = label;
                    btn.onclick = () => showTab(id);
                    btn.ondblclick = () => renameTab(btn, id);
                    return btn;
                }
                
                // Add a new tab or restore last deleted tab
                function AddTab() {
                    if (Object.keys(tabData).length >= MAX_TABS) {
                        alert("Maximum of 15 tabs reached.");
                        return;
                    }
                
                    let id, label, content;
                    if (deletedTabs.length > 0) {
                        // Restore the last deleted tab
                        const restored = deletedTabs.pop();
                        id = restored.id;
                        label = restored.label;
                        content = restored.content;
                    } else {
                        id = `tab${Date.now()}`;
                        tabCounter++;
                        label = `Step ${tabCounter}`;
                        content = `<p>Edit this content for ${label}</p>`;
                    }
                
                    tabData[id] = { label, content };
                
                    const btn = createTabButton(id, label);
                    document.getElementById('tabHeaders').appendChild(btn);
                    showTab(id);
                    saveTabs();
                }
                
                // Remove current tab (keeps at least one)
                function RemoveTab() {
                    if (!currentTabId) return;
                
                    if(Object.keys(tabData).length === 1) {
                        alert("You must have at least one tab.");
                        return;
                    }
                
                    // Save deleted tab to restore later
                    deletedTabs.push({ id: currentTabId, ...tabData[currentTabId] });
                
                    document.getElementById(`btn-${currentTabId}`).remove();
                    delete tabData[currentTabId];
                
                    const firstRemaining = document.querySelector('.tab-button');
                    if (firstRemaining) {
                        showTab(firstRemaining.id.replace("btn-", ""));
                    }
                    saveTabs();
                }
                
                // Show a tab
                function showTab(id) {
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove("active"));
                    document.getElementById(`btn-${id}`).classList.add("active");
                
                    document.getElementById('tabContentBox').innerHTML = tabData[id].content;
                    currentTabId = id;
                    UpdateCodeOutput();
                }
                
                // Rename tab
                function renameTab(button, id) {
                    const currentName = button.textContent;
                    const newName = prompt("Enter new tab name:", currentName);
                    if (newName && newName.trim() !== "") {
                        button.textContent = newName;
                        tabData[id].label = newName;
                        saveTabs();
                    }
                }
                
                // Update content when edited
                document.getElementById('tabContentBox').addEventListener('input', () => {
                    if (currentTabId) {
                        tabData[currentTabId].content = document.getElementById('tabContentBox').innerHTML;
                        UpdateCodeOutput();
                        saveTabs();
                    }
                });
                
                // Update code output box
                function UpdateCodeOutput() {
                    if (currentTabId) {
                        document.getElementById('codeOutput').textContent = tabData[currentTabId].content;
                    }
                }
                
                // Save tabs to localStorage
                function saveTabs() {
                    localStorage.setItem("tabsData", JSON.stringify({ tabCounter, tabData }));
                }

                function ResetTabs() {
                    if(!confirm("Are you sure you want to reset all tabs? This will remove all your changes.")) 
                        return;

                    // Clear localStorage
                    localStorage.removeItem("tabsData");

                    // Clear current tabs and deleted stack
                    tabData = {};
                    deletedTabs = [];
                    currentTabId = null;
                    tabCounter = 0;

                    // Remove all tab buttons from the page
                    document.getElementById('tabHeaders').innerHTML = '';

                    // Reset content box
                    document.getElementById('tabContentBox').innerHTML = 'Select a tab to see its content.';
                    document.getElementById('codeOutput').textContent = '';

                    // Add initial default tab
                    AddTab();
                }
                </script>
        </div>
    </body>
    <foot> <!--Footer Section includes Copyright, Name, Number, and Date-->
        <hr class ="thickline"> <!--Line used as a separator-->
        <br>
        <br>
        <p style="text-align: center; font-size: 20px;">Copyright, Brianna Bagnall, 21984687, AUG-2025</p>
    </foot>
</html>