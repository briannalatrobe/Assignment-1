<!DOCTYPE HTML>
<html>
    <head> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- This is used for the hamburger menu, specifically browser scaling -->
        <meta name="color-scheme" content="light dark"> <!-- This is used for the dark mode feature -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!-- This is used for the hamburger menu icon -->
        <!--This style sheet is used for the dark mode feature-->
        <style>
            body {
                padding: 20px;
                background-color: white;
                color: black;
                font-size: 30px;
            }

            .dark-mode {
                background-color: black;
                color: white;
            }
        </style>

        <!--This style sheet is used for the HTML output box-->
        <style>
            #codeOutput {
                white-space: pre-wrap;      
                word-wrap: break-word;      
                overflow: auto;             
                max-height: 400px;          
                background-color: #f4f4f4;  
                padding: 10px;
                border: 1px solid black;
            }
            body.dark-mode #codeOutput {
                background-color: #222;
                color: white;
                border: 1px solid white;
            }
        </style>
        <!--This style sheet is used for the vertical lines that separate the header and footer-->
        <style> 
            hr.thickline {
                height: 5px;
                border: none;
                background-color: black;
                margin-top: 5px;
                margin-bottom: 5px;
            }

            body.dark-mode hr.thickline {
                background-color: white; 
            }

            hr.vertical-line {
            border-left: 1px solid;
            height: 100px; 
            }
        </style>

        <!--This style sheet is for the appearance of the hamburger menu, both uncollapsed and collapsed.-->
        <style> 
            .topnav {
                overflow: hidden;
            }
                
            .topnav a {
                float: left;
                display: block;
                text-align: center;
                color: black;
                padding: 14px 16px;
                text-decoration: none;
                font-size: 17px;
            }
                
            .topnav a:hover {
                border: 2px solid;
            }
                
            .topnav a.active {
                background-color: black;
                color: white;
            }
                
            .topnav .icon {
                display: none;
            }

            body.dark-mode .topnav a {
                color: white;
                background-color: black;
            }
                
            @media screen and (max-width: 900px) {
                .topnav a:not(:first-child) {display: none;}
                .topnav a.icon {
                    float: right;
                    display: block;
                }
            }
                
            @media screen and (max-width: 900px) {
                .topnav.responsive {position: relative;}
                .topnav.responsive .icon {
                    position: absolute;
                    right: 0;
                    top: 0;
                }
                .topnav.responsive a {
                    float: none;
                    display: block;
                    text-align: left;
                }
            }
        </style>

        <!--This style sheet is for the slider which controls the dark mode setting-->
        <style> 
            .switch {
                position: relative;
                display: inline-block;
                width: 30px;
                height: 17px;
            }
        
            .switch input { 
                opacity: 0;
                width: 0;
                height: 0;
            }

            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: black;
                -webkit-transition: .4s;
                transition: .4s;
            }

            .slider:before {
                position: absolute;
                content: "";
                height: 13px;
                width: 13px;
                left: 2px;
                bottom: 2px;
                background-color: white;
                -webkit-transition: .4s;
                transition: .4s;
            }

            input:checked + .slider {
                background-color: grey;
            }

            input:focus + .slider {
                box-shadow: 0 0 1px black;
            }

            input:checked + .slider:before {
                -webkit-transform: translateX(13px);
                -ms-transform: translateX(13px);
                transform: translateX(13px);
            }

            .slider.round {
                border-radius: 17px;
            }

            .slider.round:before {
                border-radius: 50%;
            }
        </style>

        <!--This style sheet is for the reset button--> 
        <style>
            .MyButton {
                color: black;
                background-color: white;
                padding: 15px 15px;
                border: 3px solid black;
                border-radius: 30%;
            }

            body.dark-mode .MyButton {
                background-color: black;
                border: 3px solid white;
                color: white;
            }
        </style>

        <!--This style sheet is for the tab section, including the tab buttons, output boxes, & content inside the boxes --> 
        <style>
            .tabs-layout {
                display: flex;
                gap: 20px;
                margin-top: 20px;
            }
    
            .tab-headers {
                display: flex;
                flex-direction: column;
                gap: 5px;
            }
    
            .tab-button {
                display: flex; 
                align-items: center; 
                justify-content: space-between; 
                border: 1px solid black; 
                padding: 5px; 
                background-color: white; 
                cursor: pointer; 
                width: 120px; 
                color: black
            }
    
            .tab-button.active {
                background: #ddd;
                font-weight: bold;
            }
    
            .tab-content-box {
                border: 1px solid black;
                padding: 15px;
                width: 250px;
                min-height: 150px;
                background: #f9f9f9;
            }
    
            body.dark-mode .tab-button {
                border: 1px solid white;
                background: #222;
                color: white;
            }
    
            body.dark-mode .tab-button.active {
                background: #444;
            }
    
            body.dark-mode .tab-content-box {
                border: 1px solid white;
                background: #222;
                color: white;
            }
        </style>
    </head> <!--End of Header-->

    <body> <!--Beginning of Body-->
        <!--This includes student number, title, dark mode function, and hamburger menu-->
        <p style="text-align: right; font-size: 15px;">STUDENT NUMBER: 21984687</p> <!--student number is located in top right hand corner-->
        <p style="text-align: center;">Assignment 1 Submission</p> <!--Title is centered-->

        <!--Dark mode checkbox function-->
        <p style="text-align: right; font-size: 18px">Dark Mode 
            <label class="switch">
            <input type="checkbox" onclick="DarkMode()"> <!--When the button is clicked, the DarkMode function applies itself-->
            <span class="slider round"></span> 
        </label></p>
        <!--This script makes the checkbox toggle dark mode on/off-->
        <script> 
            function DarkMode() {
               var element = document.body;
               element.classList.toggle("dark-mode");
            }
        </script>
        
        <div>
            <hr class="thickline"> <!--Separator Line-->
                <div class="topnav" id="MainMenu"> <!--This is the list of menu items in the Hamburger menu-->
                  <a href="Home Page.html">Tabs</a>
                  <a href="Escape Room.html">Escape Room</a>
                  <a href="Coding Races.html">Coding Races</a>
                  <a href="Court Room.html">Court Room</a>
                  <a href="About Page.html">About</a>
                  <a href="javascript:void(0);" class="icon" onclick="Collapse()"> <!--This is saying that when the page goes below a certain number of pixels in size, to collapse the menu -->
                    <i class="fa fa-bars"></i>
                  </a>
                </div>
                
                <!-- This is the script that allows for the hamburger menu to change depending on the size of the current browser -->
                <script>
                function Collapse() {
                  var menu = document.getElementById("MainMenu"); //defines the menu element
                  if (menu.className === "topnav") { //checks the current state of the menu. "topnav" means that the webpage is in desktop layout
                    menu.className += " responsive"; //toggles the vertical list. Only does this if the page becomes a mobile layout
                  } else {
                    menu.className = "topnav"; //if it doesn't become a mobile layout it stays in desktop layout
                  }
                }
                </script>
            <hr class="thickline"> <!--Separator Line-->
        </div>
        <div> <!--This div is for the body heading "Tabs"-->
        <p style="text-align: left; margin-left: 100px;">Tabs</p>
        </div>
        <!--This section is for the positioning of the content exclusive to Home Page.html-->
        <div> <!--This div is for the sub-heading & for the [+] and [-] buttons-->
            <section class="tabs-section">
                <div>
                  Tabs Headers: 
                  <button onclick="AddTab()">[+]</button>
                  <button onclick="RemoveTab()">[-]</button>
                </div>
                <!--This div is where the tabs go-->
                <div id="tabContents">
                    <!--tabHeaders is a container that holds all the tab buttons-->
                    <div class="tab-headers" id="tabHeaders"></div>
                    <!--This div is where the tab content box goes-->
                    <div>
                        <h3>Tabs Content</h3>
                        <div id="tabContentBox" class="tab-content-box" contenteditable="true">
                        Select a tab to see its content.
                        </div>
                    </div>
                    <!--This div is where the html output box & reset button goes-->
                    <div>
                        <h3>HTML Output</h3>
                        <pre id="codeOutput" class="tab-content-box"></pre>
                        <button class="MyButton" onclick="ResetTabs()">Reset</button>
                        <button class="MyButton" onclick="HTMLExport()">Output</button>
                    </div>
                </div>
            </section>
            <!--This script contains the functionality for the body section of the webpage-->
            <script>
                let tabCounter = 1; //This keeps a count on how many tabs there are open on the page
                let currentTabID = null; //Initialises a variable that is used to represent the ID of the tab that is currently open
                let tabData = {}; //Initialises an array that stores the content within a tab
                let deletedTabs = []; //Initialises an array that stores tabs when they are deleted
                const maxTabs = 15; //Can only have a maximum of 15 tabs open at any given time
                
                // This function loads saved tabs from localStorage
                window.onload = function() { //this function runs when the webpage is opened.
                    const savedTabs = JSON.parse(localStorage.getItem("tabsData")); //receives any tabs that had been created from a different time
                    if(savedTabs && savedTabs.tabData && Object.keys(savedTabs.tabData).length > 0) { //If there are saved tabs
                        tabCounter = savedTabs.tabCounter || Object.keys(savedTabs.tabData).length; //the counter is now equal to the length of the amount of tabs there are saved
                        tabData = savedTabs.tabData; //the data in the tabs becomes what was in localStorage.
                        const savedHeaders = document.getElementById("tabHeaders"); //allows us to add tab buttons for the saved tabs
                        for(const id in tabData) { //loops over each tab
                            const btn = createTabButton(id, tabData[id].label); //creates a tab button for each tab
                            savedHeaders.appendChild(btn); //appends the button to tabHeaders for each saved tab
                        }
                        showTab(Object.keys(tabData)[0]); //opens the tab that comes first in the array of tabs.
                    }
                    
                    else {
                        //If there are no saved tabs, open a new one. this ensures there is always one tab open.
                        AddTab();
                    }
                }
                
                //This function allows for new tab buttons to be created
                function createTabButton(id, label) {
                    const btn = document.createElement('button'); //creates a new button instance which doesn't yet exist
                    btn.className = 'tab-button'; //applies the css styling to each new button
                    btn.id = `btn-${id}`; //gives the button a unique ID
                    btn.textContent = label; //sets the text displayed in the button
                    btn.onclick = () => showTab(id); //when the user clicks once, the content in the tab appears
                    btn.ondblclick = () => renameTab(btn, id); //when the user clicks twice, the name of the button can be changed
                    return btn;
                }
                
                //This function allows for a new tab to be added or for the last deleted tab to be restored
                function AddTab() {
                    
                    //If there are more than 15 tabs, this if statement stops the user from adding any more tabs and informs them that they have reached the limit.
                    if (Object.keys(tabData).length >= maxTabs) {
                        alert("Maximum of 15 tabs reached.");
                        return;
                        }
            
                    let id, label, content; //initialises the elements of a tab
                    // check for deleted tabs; if there have been tabs that have been deleted, this will restore them.
                    if (deletedTabs.length > 0) { 
                        const restored = deletedTabs.pop(); //"restored" is the last tab that was in the deletedTabs array.
                        id = restored.id; //defines the id as the id that was in the last deleted tab
                        label = restored.label; //defines the label as the id that was in the last deleted tab
                        content = restored.content; //defines the content as the id that was in the last deleted tab
                    } 
                    else {
                        id = `tab${tabCounter}`; //defines id using tabCounter
                        label = `Step ${tabCounter}`; //labels the tab by default as "step (counter number)"
                        content = `<p>Edit this content for ${label}</p>`;  //outputs a line of content including the label to explain to the user what to do.
                        tabCounter++; //increases the tab counter
                    }
                
                    tabData[id] = { label, content }; //puts the tab in the array
                
                    const btn = createTabButton(id, label); //creates a button for the tab
                    document.getElementById('tabHeaders').appendChild(btn); //appends a button to tabHeaders which allows it to appear on the webpage
                    showTab(id); //immediately shows the content in the new tab that was created
                    saveTabs(); //saves the tab to localStorage
                }
                
                //This function removes the current tab selected
                //There must be one tab open at any given time
                function RemoveTab() {
                    if (!currentTabID) return;
                
                    //an error message appears if the user is trying to delete the last tab.
                    if(Object.keys(tabData).length === 1) {
                        alert("You must have at least one tab.");
                        return;
                    }
                
                    //Appends the deleted tab to the deleted tab array.
                    deletedTabs.push({ id: currentTabID, ...tabData[currentTabID] });
                
                    document.getElementById(`btn-${currentTabID}`).remove(); //finds the button related to the tab and removes it from the webpage
                    delete tabData[currentTabID]; //removes the content from the tabData object
                
                    const firstRemaining = document.querySelector('.tab-button'); //finds the first tab remaining on the page
                    if (firstRemaining) {
                        showTab(firstRemaining.id.replace("btn-", "")); //replace the old button with the new button
                    } 
                    saveTabs(); //save changes to localStorage
                }
                
                // this function allows tab content to be shown
                function showTab(id) {
                    //this section is for the visual appearance of which tab is currently active
                    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove("active")); //makes none of the tabs active
                    document.getElementById(`btn-${id}`).classList.add("active"); //finds the tab that is selected and makes it active
                
                    //this section is for what is displayed in the content box and HTML output box
                    document.getElementById('tabContentBox').innerHTML = tabData[id].content; //replaces the content with the content of whichever tab is selected
                    currentTabID = id; //changes the currentTabID to the ID of the tab that is open
                }
                
                // this function allows for tabs to be renamed
                function renameTab(button, id) {
                    const currentName = button.textContent; //retrieves the current name of the button
                    const newName = prompt("Enter new tab name:", currentName); //prompts the user to change the name of the tab
                    if (newName && newName.trim() !== "") { //checks to make sure the user submitted a valid name
                        button.textContent = newName; //changes the name to the new name
                        tabData[id].label = newName; //updates the new name as the id of the tab
                        saveTabs(); //saves the tab updates to localStorage
                    }
                }
                
                // This script updates the webpage when content is edited
                document.getElementById('tabContentBox').addEventListener('input', () => { //this is how the webpage knows the user is updating the tab content box
                    if (currentTabID) { //whichever tab is open
                        tabData[currentTabID].content = document.getElementById('tabContentBox').innerHTML; //updates the tabData object with the current content of the tab
                        saveTabs(); //saves the updates to localStorage
                    }
                });
                
                // this function updates the code output box to show whatever is in the tab that is currently open.
                function UpdateCodeOutput() {
                    if (currentTabID) { //if the tab is open
                        document.getElementById('codeOutput').textContent = tabData[currentTabID].content; //display the content in the tab
                    }
                }
                
                // this function saves tabs to localStorage
                function saveTabs() {
                    localStorage.setItem("tabsData", JSON.stringify({ tabCounter, tabData }));
                }

                //This function allows for the tabs and the content in them to be reset.
                function ResetTabs() {
                    //when the reset button is pressed, a confirmation pop-up appears so that if the user pressed the button accidentally their stuff wouldnt immediately be deleted.
                    if(!confirm("Are you sure you want to reset all tabs? This will remove all your changes.")) 
                        return;

                    // clear the items in localStorage
                    localStorage.removeItem("tabsData");

                    // clear the tabs that are on the webpage currently & set the variables back to what they were initially.
                    tabData = {}; //clears tab data
                    deletedTabs = []; //clears deleted tabs
                    currentTabID = null; //there is no current tab open
                    tabCounter = 1; //resets tabCounter

                    // remove all tab buttons from the page
                    document.getElementById('tabHeaders').innerHTML = '';

                    // reset what appears inside the content box
                    document.getElementById('tabContentBox').innerHTML = 'Select a tab to see its content.';
                    document.getElementById('codeOutput').textContent = '';

                    // create a default tab so that there is always a tab open.
                    AddTab();
                }
                
                function HTMLExport() {
                    //validation - if there are 0 tabs the function wont work. 
                    //Note: There should never be 0 tabs, but in the event there is a bug that allows for 0 tabs then this will stop the html from exporting to a file.
                    if (Object.keys(tabData).length === 0) {
                        alert("No tabs to export.");
                    return;
                    }

                    //combines all the tab contents into one HTML body
                    let allContent = ''; //initialise allContent variable
                    for (const id in tabData) { //for all the tabs that are open
                        allContent += `<h2>${tabData[id].label}</h2>\n`; //appends the tab labels to the HTML body
                        allContent += `${tabData[id].content}\n`; //appends the tab content to the HTML body
                        allContent += `<hr>\n`; //appends a black line/separator between the tabs to make it visually easier to read.
                    }

                    //create a full HTML structure. Includes a small amount of inline CSS.
                    const outputHTML = `
                    <!DOCTYPE html>
                    <html>
                        <head>
                            <meta charset="UTF-8"> 
                            <title>All Tabs Export</title>
                        <style>
                            body { font-family: Arial, sans-serif; margin: 20px; }
                            h2 { margin-top: 30px; }
                            hr { border: 1px solid #000; margin: 20px 0; }
                        </style>
                        </head>
                        <body>
                            ${allContent}
                        </body>
                    </html>`;

                    //When the output button is pressed, the content in the HTML output box updates to show the HTML structure that appears in the HTML file that is created.
                    document.getElementById('codeOutput').textContent = outputHTML;

                    //create a downloadable file
                    const blob = new Blob([outputHTML], { type: "text/html" }); //uses a js blob object
                    const url = URL.createObjectURL(blob); //creates a url

                    //opens the webpage
                    window.open(url, "_blank"); 

                    //cleanup 
                    URL.revokeObjectURL(url);
                }
            </script>
        </div>
        <footer> <!--Footer Section includes Copyright, Name, Number, and Date-->
            <hr class ="thickline"> <!--Line used as a separator-->
            <br>
            <br>
            <p style="text-align: center; font-size: 20px;">Copyright, Brianna Bagnall, 21984687, AUG-2025</p> 
        </footer>
    </body>
</html>